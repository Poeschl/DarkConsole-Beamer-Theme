sudo: required

before_install:
  - cd .buildscripts
  - wget https://github.com/scottkosty/install-tl-ubuntu/raw/master/install-tl-ubuntu
  - chmod +x install-tl-ubuntu && sudo ./install-tl-ubuntu --profile $TRAVIS_BUILD_DIR/.buildscripts/texlive.profile
  - sudo /opt/texbin/tlmgr install chktex beamer xcolor pgf droid minted fvextra upquote slantsc ifplatform xstring framed
  - cd $TRAVIS_BUILD_DIR

script:
  - mkdir build
  - /opt/texbin/pdflatex -shell-escape -interaction=nonstopmode -halt-on-error -output-directory build Example_Presentation.tex
  - /opt/texbin/chktex build/Example_Presentation.tex

after_failure:
  # - ls /opt/texbin
  # - cat $TRAVIS_BUILD_DIR/.buildscripts/install-tl-1.log

deploy:
  provider: releases
  api_key: ${GH_TOKEN}
  file: "build/Example_Presentation.pdf"
  file_glob: true
  skip_cleanup: true
  on:
    tags: true
